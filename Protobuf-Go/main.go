package main

import (
	"fmt"
	"time"

	pb "Protobuf-Go/models"

	proto "github.com/golang/protobuf/proto"
	"google.golang.org/protobuf/types/known/durationpb"
	"google.golang.org/protobuf/types/known/timestamppb"
)

func main() {
	p := pb.Person{
		Id:    1234,
		Name:  "John Doe",
		Email: "jdoe@example.com",
		Phones: []*pb.Person_PhoneNumber{
			{Number: "555-4321", Type: pb.Person_HOME},
		},
		LastUpdated: timestamppb.Now(),
		//Photo:        []byte("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"),
		Salary:       1500.50,
		AnyMap:       make(map[string]int64),
		WorkDuration: durationpb.New(8 * time.Hour),
	}

	// Original struct AddressBook
	ab := &pb.AddressBook{
		People: []*pb.Person{&p},
	}

	fmt.Println("Address book => ", ab)
	fmt.Println()

	// Serialize an instance of AddressBook with proto.Marshal
	serialized, err := proto.Marshal(ab)
	if err != nil {
		panic(err)
	}

	fmt.Println("Serialized => ", serialized)
	fmt.Println()

	// Unserialize the serialized object ([]bytes in binary proto format) and get the same object back
	var ab2 pb.AddressBook
	proto.Unmarshal(serialized, &ab2)

	fmt.Println("Unserialized = Address book => ", ab2)
}
